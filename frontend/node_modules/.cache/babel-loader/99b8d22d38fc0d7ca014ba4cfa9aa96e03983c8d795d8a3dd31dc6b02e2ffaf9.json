{"ast":null,"code":"// use: let deferred = new Deferred();\n/** Backwards compatible Promise.defer() function */\nexports.Deferred = function () {\n  // credit: https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred#Backwards_and_forwards_compatible_helper\n  this.resolve = null;\n  this.reject = null;\n  this.promise = new Promise(function (resolve, reject) {\n    this.resolve = resolve;\n    this.reject = reject;\n  }.bind(this));\n  Object.freeze(this);\n};\nexports.getAuthHeaderObject = function (b2) {\n  const id = b2.applicationKeyId || b2.accountId;\n  if (!id) {\n    throw new Error('Invalid accountId or applicationKeyId');\n  }\n  if (!b2.applicationKey) {\n    throw new Error('Invalid applicationKey');\n  }\n  let base64 = Buffer.from(id + ':' + b2.applicationKey).toString('base64');\n  return {\n    Authorization: 'Basic ' + base64\n  };\n};\nexports.getAuthHeaderObjectWithToken = function (b2) {\n  if (!b2) {\n    throw new Error('Invalid B2 instance');\n  }\n  if (!b2.authorizationToken) {\n    throw new Error('Invalid authorizationToken');\n  }\n  return {\n    Authorization: b2.authorizationToken\n  };\n};\nexports.parseJson = function (jsonString) {\n  try {\n    return JSON.parse(jsonString);\n  } catch (e) {\n    // got error\n  }\n};\nexports.saveAuthContext = function (context, authResponse) {\n  context.authorizationToken = authResponse.authorizationToken;\n  context.apiUrl = authResponse.apiUrl;\n  context.downloadUrl = authResponse.downloadUrl;\n  context.accountId = authResponse.accountId;\n};\nexports.getProcessFileSuccess = function (deferred) {\n  return function (error, response, body, promise) {\n    deferred = deferred || promise;\n    if (error) {\n      deferred.reject(error);\n    } else if (response.statusCode !== 200) {\n      deferred.reject(response.statusMessage);\n    } else {\n      deferred.resolve(response);\n    }\n  };\n};\nexports.processResponseGeneric = function (deferred) {\n  return function (error, response, body, promise) {\n    deferred = deferred || promise;\n    if (error) {\n      return deferred.reject(error);\n    } else {\n      let genericResponse = exports.parseJson(body);\n      deferred.resolve(genericResponse);\n    }\n  };\n};\nexports.getUrlEncodedFileName = function (fileName) {\n  return fileName.split('/').map(encodeURIComponent).join('/');\n};","map":{"version":3,"names":["exports","Deferred","resolve","reject","promise","Promise","bind","Object","freeze","getAuthHeaderObject","b2","id","applicationKeyId","accountId","Error","applicationKey","base64","Buffer","from","toString","Authorization","getAuthHeaderObjectWithToken","authorizationToken","parseJson","jsonString","JSON","parse","e","saveAuthContext","context","authResponse","apiUrl","downloadUrl","getProcessFileSuccess","deferred","error","response","body","statusCode","statusMessage","processResponseGeneric","genericResponse","getUrlEncodedFileName","fileName","split","map","encodeURIComponent","join"],"sources":["/Users/chanakyaratnam/Library/Mobile Documents/com~apple~CloudDocs/Codes/b2-up-down/frontend/node_modules/backblaze-b2/lib/utils.js"],"sourcesContent":["// use: let deferred = new Deferred();\n/** Backwards compatible Promise.defer() function */\nexports.Deferred = function() {\n    // credit: https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred#Backwards_and_forwards_compatible_helper\n    this.resolve = null;\n    this.reject = null;\n    this.promise = new Promise(function(resolve, reject) {\n        this.resolve = resolve;\n        this.reject = reject;\n    }.bind(this));\n\n    Object.freeze(this);\n};\n\nexports.getAuthHeaderObject = function(b2) {\n    const id = b2.applicationKeyId || b2.accountId;\n    if (!id) {\n        throw new Error('Invalid accountId or applicationKeyId');\n    }\n    if (!b2.applicationKey) {\n        throw new Error('Invalid applicationKey');\n    }\n    let base64 = Buffer.from(id + ':' + b2.applicationKey).toString('base64');\n    return {\n        Authorization: 'Basic ' + base64\n    };\n};\n\nexports.getAuthHeaderObjectWithToken = function(b2) {\n    if (!b2) {\n        throw new Error('Invalid B2 instance');\n    }\n    if (!b2.authorizationToken) {\n        throw new Error('Invalid authorizationToken');\n    }\n    return {\n        Authorization: b2.authorizationToken\n    };\n};\n\nexports.parseJson = function(jsonString) {\n    try {\n        return JSON.parse(jsonString);\n    } catch (e) {\n        // got error\n    }\n};\n\nexports.saveAuthContext = function (context, authResponse) {\n    context.authorizationToken = authResponse.authorizationToken;\n    context.apiUrl = authResponse.apiUrl;\n    context.downloadUrl = authResponse.downloadUrl;\n    context.accountId = authResponse.accountId;\n};\n\nexports.getProcessFileSuccess = function(deferred) {\n    return function(error, response, body, promise) {\n        deferred = deferred || promise;\n        if (error) {\n            deferred.reject(error);\n        } else if (response.statusCode !== 200) {\n            deferred.reject(response.statusMessage);\n        } else {\n            deferred.resolve(response);\n        }\n    };\n};\n\nexports.processResponseGeneric = function (deferred) {\n    return function(error, response, body, promise) {\n        deferred = deferred || promise;\n        if (error) {\n            return deferred.reject(error);\n        } else {\n            let genericResponse = exports.parseJson(body);\n            deferred.resolve(genericResponse);\n        }\n    };\n};\n\nexports.getUrlEncodedFileName = function(fileName) {\n    return fileName.split('/')\n        .map(encodeURIComponent)\n        .join('/');\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}